<!DOCTYPE html>


<html lang="zh-CN">


<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    计网笔记 |  GIGI
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">
  
<link rel="stylesheet" href="/css/custom.css">

  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

  

<link rel="alternate" href="/atom.xml" title="GIGI" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-计网"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  计网笔记
</h1>
 

    </header>
     
    <div class="article-meta">
      <a href="/2022/06/13/%E8%AE%A1%E7%BD%91/" class="article-date">
  <time datetime="2022-06-13T08:20:00.000Z" itemprop="datePublished">2022-06-13</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Note/">Note</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">2.5k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">8 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <p>考研复习笔记</p>
<span id="more"></span>

<hr>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><br>

<img src="https://sitedunant.oss-cn-guangzhou.aliyuncs.com/image-20220613195432262.png" alt="image-20220613195432262" style="zoom:50%;">

<br>

 <img src="https://img.imgdb.cn/item/607f02468322e6675c4e1e17.png" alt="image-20210220223722089" style="zoom: 50%;">

<p>带宽：发送端在单位时间最高数据率，其中传输速度不变</p>
<p>时延带宽积：某段链路现在有多少容量</p>
 <img src="https://img.imgdb.cn/item/607f000b8322e6675c48c665.png">

<p>往返时延RTT<br>        包括：往返传播时延（传播时延*2）+  末端处理时间</p>
 <img src="https://img.imgdb.cn/item/607f025f8322e6675c4e59b9.png" alt="image-20210220230448380" style="zoom: 67%;">



<p>协议：对等实体间需遵循的标准<br>服务：只能由下层为上层提供服务<br>接口：垂直方向上相邻两层，提供桥梁</p>
<p>层次划分<br>        7层OSI参考模型                    -&gt;                5层体系结构<br>        4层TCP/IP参考模型               -&gt;</p>
 <img src="https://img.imgdb.cn/item/607f000b8322e6675c48c66c.png">

<p><br><br><br><br><br><br><br></p>
<h1 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h1><br>

<img src="https://img.imgdb.cn/item/607f000b8322e6675c48c687.png" alt="image-20210304151243522" style="zoom: 50%;">



<p>​        </p>
<p>​        <strong>三种通信方式</strong>：单工通信，半双工通信，全双工通信</p>
<p>​        <strong>两种数据传输方式</strong><br>​        <img src="https://img.imgdb.cn/item/607f000b8322e6675c48c68d.png" alt="image-20210304151721964" style="zoom:50%;"></p>
<p>​        <strong>码元，速率，波特，带宽</strong></p>
<p>​            传输速率 != 传播速率<br>​                传播速率指电磁波/光波在信道上的速率</p>
<p>​            码元传输速率：1s传输多少个码元，单位波特(Baud)<br>​                                       1Baud = 1码元/s</p>
<p>​            信息传输速率：1s传输多少个比特<br>​                                        （例：二进制每码元携带1bit信息量，四进制带2bit信息量）</p>
<p>​            带宽：单位时间最高数据率，单位b/s（理想状态，一般达不到）</p>
<p>​        <strong>信道带宽</strong></p>
<p>​            信道能通过的，最高频率 - 最低频率    (Hz)</p>
<p>​        <strong>码间串扰</strong></p>
<p>​            接收端收到的信号波形失去了码元之间清晰界限的现象（频率过高）</p>
<h4 id="奈氏准则"><a href="#奈氏准则" class="headerlink" title="奈氏准则"></a>奈氏准则</h4><p>​            为避免码间串扰，极限<u>码元</u>传输速率为 <strong>2W</strong> Baud，<strong>W</strong>是信道带宽，单位是<strong>Hz</strong><br>​            理想低通信道下的极限<u>数据</u>传输率 = <strong>2Wlog<sub>2</sub>V</strong>  (b/s)，V是码元有几种离散点平数目</p>
<h4 id="香农定理"><a href="#香农定理" class="headerlink" title="香农定理"></a>香农定理</h4><p>​            信噪比 (dB) = 10log<sub>10</sub> (S/N)，后者只是一个比值, 一般计算要求后者</p>
<p>​            在带宽受限且有噪声的信道中，为了不产生误差，信息的数据传输速率有上限值<br>​                    信道的极限<u>数据</u>传输速率 = Wlog<sub>2</sub>(1+S/N)  (b/s)</p>
<p>​        <strong>什么时候用奈氏，什么时候用香农</strong></p>
<p>​            看题目给的是什么，码元种类(几进制)还是信噪比。如果都有则两种定理都计算，取其更小值</p>
<p><strong>编码 &amp; 调制</strong></p>
<p>​            传输距离近时，用基带传输方式。基带信号是来自信源的信号，直接表达了要传输的信息的信号，在数字信道传输<br>​            传输距离远时，用宽带传输方式。是将基带信号将载波调制后，使信号的频率范围变高，在模拟信道上传输</p>
 <img src="/2022/06/13/%E8%AE%A1%E7%BD%91/XXXXX\source\_posts\计网\image-20210307143141655.png" alt="image-20210307143141655" style="zoom:50%;">

<p><strong>数字数据</strong> 编码为 <strong>数字信号</strong></p>
<p>非归零编码【NRZ】：高电平为1，低电平为0<br>归零编码【RZ】：信号电平在码元中点归零<br>方向不归零编码【NRZI】：信号电平翻转表示0，不翻转表示1</p>
<p>曼彻斯特编码：码元分成两份，前高后低为1，前低后高为0。数据传输速率只有调制速率的1/2<br>差分曼彻斯特编码：同1异0，且在每个码元的中间有一次电平跳转</p>
<p>4B/5B编码，编码效率为80%</p>
<p><strong>数字数据</strong> 调制为 <strong>模拟信号</strong></p>
<img src="https://img.imgdb.cn/item/607f01d08322e6675c4cf2d2.png">

<p><strong>模拟数据</strong> 编码为 <strong>数字信号</strong></p>
<img src="https://img.imgdb.cn/item/607f01d08322e6675c4cf2d6.png">

<p><strong>模拟数据</strong> 调制为 <strong>模拟信号</strong>：转换成高频信号进行传输</p>
<p><strong>中继器</strong>：<u>再生</u>数字信号</p>
<img src="https://img.imgdb.cn/item/607f01d08322e6675c4cf2e0.png">



<p><strong>集线器</strong>：再生，放大信号</p>
<p><br><br><br><br><br><br><br></p>
<h1 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h1><br>

<p>尚未做好笔记</p>
<p><br><br><br><br><br><br><br></p>
<h1 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h1><br>

<p>传输单位是 <strong>数据报</strong> ，分组则是将数据块分割成小的数据块然后逐个转发</p>
<p>功能：路由选择与分组转发<br>            异构网络互联<br>            拥塞控制：使用 开环(静)/闭环(动)控制 来解决</p>
<h4 id="数据交换方式"><a href="#数据交换方式" class="headerlink" title="数据交换方式"></a>数据交换方式</h4><p>​    <em>电路交换、报文交换、分组交换(数据报方式、虚电路方式)</em></p>
<p>​    电路交换：建立连接 - 通信 - 释放连接<br>​            优点：通信时延小，有序传输，没有冲突，实时性强<br>​            特点：独占资源<br>​            缺点：建立连接时间长，线路独占效率低，灵活性差，无差错控制能力</p>
<p>​    报文交换：存储转发<br>​            优点：无需建立连接，存储转发动态分配线路，线路可靠性高利用率高，多目标服务<br>​            缺点：有存储转发时延，报文大小不定</p>
<p>​    分组转发：并行转发过程<br>​            优点：同上，并且相对于报文交换，存储管理更容易<br>​            缺点：有存储转发时延，需要传输额外信息量，乱序到不同主机要对分组排序重组</p>
<p>​    计算题：单位：Mbps = 10^6 bps   kbps = 10^3 bps    1B = 8b<br>​                    是否考虑传播延时<br>​                    发送完到发送完毕还是，开始到接收完毕<br>​                    选择最少跳数<br>​                    ……</p>
<p>​    数据报方式 提供无连接服务，虚电路方式 提供连接服务</p>
<p>​    数据报：无连接、每个分组携带源和目的地址、路由器根据分组的目的地址转发分组（路由器构建，检索转发表）</p>
<p>​    虚电路：数据报方式和电路交换方式结合，需要建立释放连接，全双工通信<br>​                    每个分组携带虚电路号，路径固定，以d分组方式转发</p>
<h2 id="IPV4"><a href="#IPV4" class="headerlink" title="IPV4"></a>IPV4</h2><img src="https://sitedunant.oss-cn-guangzhou.aliyuncs.com/ipv4%E7%89%B9%E6%AE%8A%E5%9C%B0%E5%9D%80.png" alt="ipv4特殊地址" style="zoom: 40%;">



<h2 id="RIP"><a href="#RIP" class="headerlink" title="RIP"></a>RIP</h2><p><strong>特点</strong></p>
<p>实现简单开销小、好消息传得快</p>
<p>坏消息传得慢：</p>
<p><img src="https://sitedunant.oss-cn-guangzhou.aliyuncs.com/image-20220614001720462.png" alt="image-20220614001720462"></p>
<p>坏消息传得慢是因为发生在两个路由器间，由于间隔时间为30秒，可能发生的慢收敛现象</p>
<p><br><br><br><br><br><br><br></p>
<h1 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h1><br>



<img src="https://img.imgdb.cn/item/607f021b8322e6675c4db2a6.png">
<img src="https://img.imgdb.cn/item/607f021b8322e6675c4db2aa.png">





<h1 id="强化"><a href="#强化" class="headerlink" title="强化"></a>强化</h1><p><img src="https://sitedunant.oss-cn-guangzhou.aliyuncs.com/image-20221017090627018.png" alt="image-20221017090627018"></p>
<p><img src="https://sitedunant.oss-cn-guangzhou.aliyuncs.com/image-20221019212919334.png" alt="image-20221019212919334"></p>
<br>

<h1 id="协议总结"><a href="#协议总结" class="headerlink" title="协议总结"></a>协议总结</h1><br>

<h2 id="数据链路层协议"><a href="#数据链路层协议" class="headerlink" title="数据链路层协议"></a>数据链路层协议</h2><h3 id="随机访问介质控制"><a href="#随机访问介质控制" class="headerlink" title="随机访问介质控制"></a>随机访问介质控制</h3><h4 id="CSMA-载波侦听多路访问协议"><a href="#CSMA-载波侦听多路访问协议" class="headerlink" title="CSMA 载波侦听多路访问协议"></a>CSMA 载波侦听多路访问协议</h4><ol>
<li>1-坚持CSMA 冲突则随机一段时间再重新侦听</li>
<li>非坚持CSMA 信道忙则一段时间再检测是否忙</li>
<li>p-坚持CSMA 信道空闲则以概率p发送数据</li>
</ol>
<h4 id="CSMA-CD-载波侦听多路访问-碰撞检测协议"><a href="#CSMA-CD-载波侦听多路访问-碰撞检测协议" class="headerlink" title="CSMA/CD 载波侦听多路访问/碰撞检测协议"></a>CSMA/CD 载波侦听多路访问/碰撞检测协议</h4><p>适用于总线形或半双工网络</p>
<p>先听后发、边听边发、冲突停发、随机重发(无法避免冲突)</p>
<p>二进制指数退避算法：重传16次仍不成功，抛弃帧并向高层报告出错</p>
<h4 id="CSMA-CA"><a href="#CSMA-CA" class="headerlink" title="CSMA/CA"></a>CSMA/CA</h4><p>适用于无线局域网</p>
<p>碰撞避免</p>
<p>处理隐蔽站问题：源站先广播RTS请求发送控制帧，目的站检测空闲则广播<em>CTS允许发送控制帧</em>-&gt;1.许可源站 2.他站闭嘴</p>
<h4 id="令牌传递协议"><a href="#令牌传递协议" class="headerlink" title="令牌传递协议"></a>令牌传递协议</h4><p>令牌型局域网(环)，令牌：特殊的MAC控制帧</p>
<p>站点发完一帧要释放令牌，无法连续发送</p>
<p>不会发生冲突，适合负载高的广播信道</p>
<h4 id="VLAN"><a href="#VLAN" class="headerlink" title="VLAN"></a>VLAN</h4><p>相当于划分子网，划分局域网成虚拟局域网，划分广播域（相同才能转发）</p>
<h4 id="PPP协议"><a href="#PPP协议" class="headerlink" title="PPP协议"></a>PPP协议</h4><p>链路层，不可靠</p>
<p>点对点连接发送数据</p>
<p>异步线路：字节填充法    同步线路：比特填充</p>
<h2 id="网络层协议"><a href="#网络层协议" class="headerlink" title="网络层协议"></a>网络层协议</h2><h4 id="ARP-地址解析协议"><a href="#ARP-地址解析协议" class="headerlink" title="ARP 地址解析协议"></a>ARP 地址解析协议</h4><p>用 <strong>IP地址</strong> 找 <strong>MAC地址</strong></p>
<p>请求分组广播发送，响应分组单播</p>
<p>自动进行，主机用户不知道</p>
<p>RARP：MAC地址 到 IP地址</p>
<h4 id="DHCP-动态主机配置协议"><a href="#DHCP-动态主机配置协议" class="headerlink" title="DHCP 动态主机配置协议"></a>DHCP 动态主机配置协议</h4><p>给主机动态地分配IP地址</p>
<p>即插即用</p>
<p>应用层协议，基于UDP，C/S方式，广播发送报文</p>
<h4 id="ICMP-网际控制报文协议"><a href="#ICMP-网际控制报文协议" class="headerlink" title="ICMP 网际控制报文协议"></a>ICMP 网际控制报文协议</h4><p><strong>差错报告报文</strong>：终点不可达、源点抑制(拥塞)、时间超过(TTL=0)、参数问题、改变路由(可通过更好路由)</p>
<p><strong>询问报文</strong>：PING(应用层)、Traceroute(网络层)</p>
<h3 id="网络层路由协议"><a href="#网络层路由协议" class="headerlink" title="网络层路由协议"></a>网络层路由协议</h3><p>分两类</p>
<ol>
<li><p>内部网关协议IGP</p>
</li>
<li><p>外部网关协议EGP（各自治系统AS间）</p>
</li>
</ol>
<h4 id="RIP-路由信息协议"><a href="#RIP-路由信息协议" class="headerlink" title="RIP 路由信息协议"></a>RIP 路由信息协议</h4><p>基于路由向量，交换自己路由表信息</p>
<p>好消息传的快（收敛快），坏消息传得慢（慢收敛）</p>
<p>是<em>应用层协议</em>，用UDP(port 520)传送数据</p>
<p>隔段时间更新</p>
<h4 id="OSPF-开放最短路径优先协议"><a href="#OSPF-开放最短路径优先协议" class="headerlink" title="OSPF 开放最短路径优先协议"></a>OSPF 开放最短路径优先协议</h4><p><strong>洪泛法</strong> 向AS内所有路由器发相邻路由器的代价</p>
<p><em>网络层协议</em>，直接用IP数据报传送</p>
<p>在比AS更小范围的<strong>区域</strong>内，用Dijkastra计算最短路径</p>
<p>变化时才更新</p>
<p>​        分组类型：问候、数据库描述、链路状态请求、链路状态更新、链路状态确认</p>
<h4 id="BGP-边界网关协议"><a href="#BGP-边界网关协议" class="headerlink" title="BGP 边界网关协议"></a>BGP 边界网关协议</h4><p>AS之间交换路由信息（路径向量）的协议</p>
<p><em>应用层协议</em>，基于TCP(因为网络复杂要可靠)</p>
<p>​        BGP-4报文类型：打开（建立关系）、更新、保活（确认存活）、通知（检测到的差错）</p>
<br>

<h3 id="组播协议"><a href="#组播协议" class="headerlink" title="组播协议"></a>组播协议</h3><h4 id="IGMP-因特网组管理协议"><a href="#IGMP-因特网组管理协议" class="headerlink" title="IGMP 因特网组管理协议"></a>IGMP 因特网组管理协议</h4><p>让连接到本地局域网上的组播路由器知道本局域网上是否有主机参加或退出了某个组播组</p>
<p>组播路由选择：组播转发树，每个分组在每条链路上只传送一次</p>
<h3 id="移动IP"><a href="#移动IP" class="headerlink" title="移动IP"></a>移动IP</h3><p>三种功能实体：移动结点(有永久IP地址)、<strong>归属(本地)代理、外部代理</strong>    -&gt; (黑体字统称移动代理)</p>
<p>其中，归属(本地)代理：用隧道技术转交结点数据包</p>
<p>本地地址不变，用转交地址标识移动结点现在所处位置</p>
<p>移动结点在本地网时，仍用TCP/IP方式通信</p>
<br>

<h2 id="应用层协议"><a href="#应用层协议" class="headerlink" title="应用层协议"></a>应用层协议</h2><h4 id="FTP-文件传输协议"><a href="#FTP-文件传输协议" class="headerlink" title="FTP 文件传输协议"></a>FTP 文件传输协议</h4><p>可用于不同种类主机系统</p>
<p>以匿名FTP，实现文件共享</p>
<p>C/S方式，TCP可靠</p>
<p>port 21(控制连接 -&gt; 会话期间一直打开)    </p>
<p>port 20(数据连接)    主动模式PORT：服务器连接到客户端    被动模式PASV：客户端连接到服务器</p>
<p>带外传送(Out-of-band)：修改服务器上文件要先全部下载到本地</p>
<h4 id="SMTP-简单邮件传输协议"><a href="#SMTP-简单邮件传输协议" class="headerlink" title="SMTP 简单邮件传输协议"></a>SMTP 简单邮件传输协议</h4><p>“PUSH 推”</p>
<p>TCP连接 port 25</p>
<p>阶段：连接建立、邮件传送、连接释放</p>
<h4 id="POP3-邮局协议-amp-IMAP"><a href="#POP3-邮局协议-amp-IMAP" class="headerlink" title="POP3 邮局协议 &amp; IMAP"></a>POP3 邮局协议 &amp; IMAP</h4><p>POP3：”PULL 拉”</p>
<p>C/S方式 传输层的TCP port 110</p>
<p>IMAP：允许用户代理只获取报文某部分</p>
<p><br><br></p>
<iframe allow="autoplay *; encrypted-media *;" frameborder="0" height="450" style="width:100%;max-width:660px;overflow:hidden;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="https://embed.music.apple.com/cn/playlist/a-list-%E7%B2%A4%E8%AF%AD%E6%B5%81%E8%A1%8C/pl.31991c6bcf0447ac9f16c07678a5a0a0"></iframe>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/study/" rel="tag">study</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2022/10/16/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            操作系统笔记
          
        </div>
      </a>
    
    
      <a href="/2021/04/03/2/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">noTitle</div>
      </a>
    
  </nav>

  
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2021-2022
        <i class="ri-heart-fill heart_icon"></i> Dunant
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="GIGI"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->


<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: 'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto'
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>